window.main=new function(n){function t(){window.focus(),i=io.connect("http://"+window.location.host),i.on("command",function(n){console.log(n),n=n||{},n.api=n.api||"",window.main.apis[n.api]&&window.main.apis[n.api].run(n,i)}),n("#mainform").submit(function(){window.main.showFontList()})}{var i;!function(){var n=function(){if(document.currentScript)return document.currentScript.src;var n=document.getElementsByTagName("script"),t=n[n.length-1];return t.src?t.src:void 0}();return n=n.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")}()}this.apis=new function(){},this.showFontList=function(){n(".contents").html('<ul class="font-list">'),i.emit("command",{api:"getSystemFontList"})},n(window).load(function(){t()})}(jQuery),window.main.apis.renderFontList=new function(){this.run=function(n,t){var i=n.fontlist,o=twig({data:$("#template-fontlist-listitem").html()}),e=$(".font-list");$(".contents").append(e);var a=""+$("#mainform input[name=sampleText]").val();for(var r in i){var s=i[r];s.sampleText=a,s.sampleText.length||(s.sampleText=s.family);var c=$(o.render({font:s}));c.find(".font-list__family a").click(function(){$(this).parent().parent().parent().find(".font-list__property").toggle()}),e.append(c)}}};