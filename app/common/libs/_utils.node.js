!function(e){var r=require("fs"),t=(require("path"),require("crypto")),n=process.cwd(),i="/",s=function(){var e="unknown";return process.env.LOCALAPPDATA?"win":process.env.HOME?"mac":e}();e.exec=function(e,r,t){t=t||{},t.cd&&process.chdir(t.cd);var i=require("child_process").exec(e,r);return t.cd&&process.chdir(n),i},e.spawn=function(e,r,t){t=t||{},t.cd&&process.chdir(t.cd);var i=require("child_process").spawn(e,r);return t.success&&i.stdout.on("data",t.success),t.error&&i.stderr.on("data",t.error),t.complete&&i.on("close",t.complete),t.cd&&process.chdir(n),i},e.openURL=function(e){var t="open";return"win"==s&&(t="explorer",e.match(new RegExp("^(?:https?|data)\\:","i"))||r.existsSync(e)&&(e=r.realpathSync(e))),this.spawn(t,[e],{})},e.dirname=function(e){return e.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")},e.escapeRegExp=function(e){return"string"!=typeof e?e:e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},e.parsePath=function(e){var r={};return r.path=e,r.basename=this.basename(r.path),r.dirname=this.dirname(r.path),r.ext=r.basename.replace(new RegExp("^.*\\."),""),r.basenameExtless=r.basename.replace(new RegExp("\\."+this.escapeRegExp(r.ext)+"$"),""),r},e.basename=function(e){var r="";return r=e.replace(new RegExp("^.*\\/"),"")},e.mkdir=function(e){return r.existsSync(e)?!0:(r.mkdirSync(e,511),!0)},e.fileExists=function(e){return r.existsSync(e)?!0:!1},e.trim_extension=function(e){var r=this.parsePath(e),t=e.replace(new RegExp("\\."+this.escapeRegExp(r.ext)+"$"),"");return t},e.isFile=function(e){return this.fileExists(e)&&r.statSync(e).isFile()?!0:!1},e.isDirectory=function(e){return this.fileExists(e)&&r.statSync(e).isDirectory()?!0:!1},e.mkdirAll=function(e){return this.fileExists(e)?!0:(this.mkdirAll(this.dirname(e)),this.mkdir(e,511),!0)},e.getExtension=function(e){var r=e.replace(new RegExp("^.*?.([a-zA-Z0-9_-]+)$"),"$1");return r},e.fatalError=function(e){console.log("[ERROR] "+e),process.exit()},e.implode=function(e,r){var t="",n="",i="";if(1===arguments.length&&(r=e,e=""),"object"==typeof r){if("[object Array]"===Object.prototype.toString.call(r))return r.join(e);for(t in r)n+=i+r[t],i=e;return n}return r},e.mkCsv=function(e){var r="";for(var t in e){for(var n in e[t])"string"==typeof e[t][n]?(e[t][n]=e[t][n].replace(new RegExp('"',"g"),'""'),e[t][n].length&&(e[t][n]='"'+e[t][n]+'"')):e[t][n]="";r+=this.implode(",",e[t])+"\n"}return r},e.ls=function(e){return this.isDirectory(e)?r.readdirSync(e):!1},e.copy=function(e,t){if(!this.isFile(e))return!0;var n=r.writeFileSync(t,r.readFileSync(e));return this.isFile(t)?n:!1},e.copy_r=function(e,r){if(this.isFile(e))return this.copy(e,r);if(!this.isDirectory(e))return!0;this.mkdirAll(r);var t=this.ls(e);for(var n in t)this.copy_r(e+"/"+t[n],r+"/"+t[n]);return!0},e.rm=function(e){return this.isFile(e)?r.unlinkSync(e):!0},e.rmdir=function(e){return r.rmdirSync(e)},e.rmdir_r=function(e){if(e=r.realpathSync(e),this.isFile(e))return!1;if(this.isDirectory(e)){var t=this.ls(e);for(var n in t){var s=t[n];if(this.isFile(e+i+s))this.rm(e+i+s);else if(!this.rmdir_r(e+i+s))return!1}return this.rmdir(e)}return!1},e.fileAppend=function(e,t){if(!this.isFile(e))return r.writeFileSync(e,t);var n=r.statSync(e),i=r.openSync(e,"a"),s=r.writeSync(i,t.toString(),n.size);return r.closeSync(i),s},e.get_realpath=function(e,t){var n=!1;e.match(new RegExp("(\\/|\\\\)+$"))&&(n=!0),e=this.localize_path(e),(null===t||void 0===t)&&(t="."),t=this.localize_path(t);var s=this.escapeRegExp(i);if(this.isDirectory(t)?t=r.realpathSync(t):t.match(new RegExp("^((?:[A-Za-z]\\:"+s+")|"+s+"{1,2})(.*?)$"))||(t=!1),t===!1)return!1;var a="",c=e;if(e.match(new RegExp("^((?:[A-Za-z]\\:"+s+")|"+s+"{1,2})(.*?)$"))&&(a=RegExp.$1,c=RegExp.$2,a=a.replace(new RegExp(""+s+"$"),""),t=null),e=("string"==typeof t?t:"")+i+"."+i+c,this.isFile(a.$path))return u=r.realpathSync(a.$path),n&&u!=r.realpathSync("/")&&(u+=i),u;var o=e.split(i);e="";for(var p in o){var h=o[p];""!=h&&"."!=h&&(".."!=h?(0===p&&"\\"==i&&h.match(new RegExp("^[a-zA-Z]:$","s"))||(e+=i),e+=h):(e=this.dirname(e),e==i&&(e="")))}var u=a+e;return n&&(u+=i),u},e.get_relatedpath=function(e,t){var n=!1;e.match(new RegExp("(/|\\\\)+$","s"))&&(n=!0),"string"==typeof t&&t.length?t=r.realpathSync("."):this.isDirectory(t)?t=r.realpathSync(t):this.isFile(t)&&(t=r.realpathSync(this.dirname(t)));var s=function(e){var e=this.localize_path(e),r=this.escapeRegExp(i);return"\\"==i&&(e=preg_replace("/^[a-zA-Z]:/s","",e)),e=preg_replace("/^("+r+")+/s","",e),e=preg_replace("/("+r+")+$/s","",e),e=strlen(e)?explode(i,e):[]};t=s(t),e=s(e);for(var a=[];;){if(!count(t)||!count(e))break;{if(t[0]!==e[0])break;array_shift(t),array_shift(e)}}if(t.length)for(var c in t){{t[c]}a.push("..")}else a.push(".");return a=array_merge(a,e),a=implode(i,a),n&&(a+=i),a},e.localize_path=function(e){return"string"!=typeof e?e:(e=e.replace(new RegExp("\\/|\\\\"),"/"),this.is_unix()&&(e=e.replace(new RegExp("^[A-Z]\\:\\/"),"/")),e=e.replace(new RegExp("\\/+"),"/"),e=e.replace(new RegExp("\\/|\\\\"),i))},e.normalize_path=function(e){return"string"!=typeof e?e:(e=e.replace(new RegExp("\\/|\\\\"),"/"),e=e.replace(new RegExp("^[A-Z]\\:\\/"),"/"),e=e.replace(new RegExp("\\/+"),"/"))},e.is_unix=function(){return"/"==i?!0:!1},e.is_windows=function(){return"\\"==i?!0:!1},e.iterate=function(e,r,t){!new function(e,r){this.idx=-1,this.idxs=[];for(var n in e)this.idxs.push(n);this.ary=e||[],this.fnc=r||function(){},this.fncComplete=t||function(){},this.next=function(){return this.idx+1>=this.idxs.length?(this.fncComplete(),this):(this.idx++,this.fnc(this,this.ary[this.idxs[this.idx]],this.idxs[this.idx]),this)},this.next()}(e,r)},e.iterateFnc=function(e){function r(e){e=e||[];var r=0,t=e;this.start=function(e){return e=e||{},t.length<=r?this:(t[r++](this,e),this)},this.next=this.start}return new r(e)},e.parseUriParam=function(e){var r=[];if(parameters=e.split("?"),parameters.length>1)for(var t=parameters[1].split("&"),n=0;n<t.length;n++){var i=t[n].split("=");for(var s in i)i[s]=decodeURIComponent(i[s]);r.push(i[0]),r[i[0]]=i[1]}return r},e.markdown=function(e){var r=require("marked");return r.setOptions({renderer:new r.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1}),r(e)},e.base64encode=function(e){var r=e.toString("base64");return r},e.base64decode=function(e){var r=new Buffer(e,"base64").toString();return r},e.md5=function(e){var r=t.createHash("md5"),n=e+"";r.update(n,"utf8");var i=r.digest("hex");return i},e.strlen=function(e){return"string"!=typeof e?0:e.length}}(exports);